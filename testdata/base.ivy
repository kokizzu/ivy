# Copyright 2014 The Go Authors. All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

# Input and output bases.
# The testing harness resets ibase and obase before each test.

# Make sure setting a big base doesn't break seeing words as commands.
)base 16
)base 10
)base
	ibase	10
	obase	10

)ibase 16
0; 1; 10; 16; abe; 3abe; a/b; a8add6a7f6a6d; 300j200
	0 1 16 22 2750 15038 10/11 2967433346247277 768j512

)base 16
0; 1; 10; 16; abe; 3abe; a/b; a8add6a7f6a6d; 300j200
	0 1 10 16 abe 3abe a/b a8add6a7f6a6d 300j200

)ibase 8
0; 1; 10; 32; 37/41; 2367433346247277; 300j200
	0 1 8 26 31/33 87380498927295 192j128

)base 8
0; 1; 10; 32; 37/41; 2367433346247277; 300j200
	0 1 10 32 37/41 2367433346247277 300j200

)ibase 2
0; 1; 101; 101010101001; 1111/1011; 111j101
	0 1 5 2729 15/11 7j5

)base 2
0; 1; 101; 101010101001; 1111/1011; 111j101
	0 1 101 101010101001 1111/1011 111j101

)ibase 10
0; 1; 10; 32; 37/41; 2367433346247277; 3j4
	0 1 10 32 37/41 2367433346247277 3j4

)base 10
0; 1; 10; 32; 37/41; 2367433346247277; 3j4
	0 1 10 32 37/41 2367433346247277 3j4

)base 0
0; 1; 10; 32; 37/41; 2367433346247277; 0x123j0123; 0b11; 0B11; 0o11; 0O11
	0 1 10 32 37/41 2367433346247277 291j83 3 3 9 9

)ibase 3
0; 1; 2; 102; 101020101001; 1211/2011; 12j22
	0 1 2 11 201475 49/58 5j8

)base 3
0; 1; 2; 102; 101020101001; 1211/2011; 12j22
	0 1 2 102 101020101001 1211/2011 12j22

)ibase 10
)format "%x"
1; 16; 32; 64; 128**16; 16j256
	1 10 20 40 10000000000000000000000000000 10j100

)ibase 16
)format "%d"
1; a; aa; aaa; aaa**a; aja
	1 10 170 2730 22994632358756127051836490000000000 10j10

)obase 5
1; 10; 100; 1234/5678 17j22
	1 20 400 4432/42324 32j42

)base 10
x=2*3**100
)ibase 3
y=20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
x==y
	1

)base 10
x=2*3**100
)ibase 3
y=20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000/20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
y==x/x
	1

# Was a bug. Leading 0 in floating point switched to base 8.
0.69; 09e1
	69/100 90

# Was a bug. 1/f was not seen as a fraction, so it misparsed as 1/(f+1).
)base 16
1/f+1
	10/f

# Was a bug. An all-letters number in a large base was not lexing rationals and complexes,
# but returning a number, an operator, and a number. This test makes sure we get
# 2 tokens, not 4.
)ibase 16
abc/123 234
	916/97 564

# Underscores, but they work only in base 0.
)base 0
33_44; 0x33_44; 0o7_7; 0b11_01; 345_456.5
	3344 13124 63 13 690913/2

# Hexadecimal floating point
0x1.0 0x1.0p3 0x1.0p-2 0x1_2.p2
	1 8 1/4 72
